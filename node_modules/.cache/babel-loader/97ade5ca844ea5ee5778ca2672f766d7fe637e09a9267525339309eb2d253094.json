{"ast":null,"code":"import React,{useEffect}from'react';import{BrowserRouter as Router,Routes,Route,useLocation,Navigate}from'react-router-dom';import Sidebar from'./components/Sidebar';import Dashboard from'./components/Dashboard';import VehicleDetail from'./components/VehicleDetail';import Login from'./components/Login';import Header from'./components/Header';import Register from'./components/Register';import AddVehicle from'./components/AddVehicle';import EditVehicle from'./components/EditVehicle';import SelfDiagnosis from'./components/SelfDiagnosis';import ForgotPassword from\"./components/ForgotPassword\";import ResetPassword from\"./components/ResetPassword\";import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LayoutWrapper=()=>{const location=useLocation();const isLoginPage=location.pathname==='/login';const isRegisterPage=location.pathname==='/register';const isForgotPasswordPage=location.pathname==='/forgot-password';const isResetPasswordPage=location.pathname.startsWith('/reset-password');const isLoggedIn=localStorage.getItem('isLoggedIn');// Redirect to /login if not logged in and not already on login/register page\nif(!isLoggedIn&&!isLoginPage&&!isRegisterPage&&!isForgotPasswordPage&&!isResetPasswordPage){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}if(isLoginPage){return/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})})})})});}if(isRegisterPage){return/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})})})})});}if(isForgotPasswordPage){return/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(ForgotPassword,{})})})})});}if(isResetPasswordPage){return/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsx(Route,{path:\"/reset-password/:token\",element:/*#__PURE__*/_jsx(ResetPassword,{})})})})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/vehicle/:id\",element:/*#__PURE__*/_jsx(VehicleDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Vehicle-add\",element:/*#__PURE__*/_jsx(AddVehicle,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Vehicle-detail\",element:/*#__PURE__*/_jsx(VehicleDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"/vehicle/:id/edit\",element:/*#__PURE__*/_jsx(EditVehicle,{})}),/*#__PURE__*/_jsx(Route,{path:\"/self-diagnosis\",element:/*#__PURE__*/_jsx(SelfDiagnosis,{})})]})})]})]});};function App(){useEffect(()=>{// Clear tokens and login flags on first load\nlocalStorage.removeItem('token');localStorage.removeItem('isLoggedIn');},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(LayoutWrapper,{})});}export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Router","Routes","Route","useLocation","Navigate","Sidebar","Dashboard","VehicleDetail","Login","Header","Register","AddVehicle","EditVehicle","SelfDiagnosis","ForgotPassword","ResetPassword","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LayoutWrapper","location","isLoginPage","pathname","isRegisterPage","isForgotPasswordPage","isResetPasswordPage","startsWith","isLoggedIn","localStorage","getItem","to","replace","className","children","path","element","App","removeItem"],"sources":["/Users/jumratyahmad/Work/Project/web-vgarage-react/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, useLocation, Navigate } from 'react-router-dom';\nimport Sidebar from './components/Sidebar';\nimport Dashboard from './components/Dashboard';\nimport VehicleDetail from './components/VehicleDetail';\nimport Login from './components/Login';\nimport Header from './components/Header';\nimport Register from './components/Register';\nimport AddVehicle from './components/AddVehicle';\nimport EditVehicle from './components/EditVehicle';\nimport SelfDiagnosis from './components/SelfDiagnosis';\nimport ForgotPassword from \"./components/ForgotPassword\";\nimport ResetPassword from \"./components/ResetPassword\";\nimport './App.css';\n\nconst LayoutWrapper = () => {\n  const location = useLocation();\n  const isLoginPage = location.pathname === '/login';\n  const isRegisterPage = location.pathname === '/register';\n  const isForgotPasswordPage = location.pathname === '/forgot-password';\n  const isResetPasswordPage = location.pathname.startsWith('/reset-password');\n  const isLoggedIn = localStorage.getItem('isLoggedIn');\n\n  // Redirect to /login if not logged in and not already on login/register page\n  if (!isLoggedIn && !isLoginPage && !isRegisterPage && !isForgotPasswordPage && !isResetPasswordPage) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  if (isLoginPage) {\n    return (\n      <div className=\"app-container\"> \n        <div className=\"main-content\">\n          <Routes>\n            <Route path=\"/login\" element={<Login />} />\n          </Routes>\n        </div>\n      </div>\n    );\n  }\n  \n  if (isRegisterPage) {\n    return (\n    <div className=\"app-container\">\n    <div className=\"main-content\">\n      <Routes>\n        <Route path=\"/register\" element={<Register />} />\n      </Routes>\n    </div>\n    </div>\n    );\n  }\n\n  if (isForgotPasswordPage) {\n    return (\n      <div className=\"app-container\">\n        <div className=\"main-content\">\n          <Routes>\n            <Route path=\"/forgot-password\" element={<ForgotPassword />} />\n          </Routes>\n        </div>\n      </div>\n    );\n  }\n\n  if (isResetPasswordPage) {\n    return (\n      <div className=\"app-container\">\n        <div className=\"main-content\">\n          <Routes>\n            <Route path=\"/reset-password/:token\" element={<ResetPassword />} />\n          </Routes>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Header />\n      <div className=\"app-container\">\n        <Sidebar />\n        <div className=\"main-content\">\n          <Routes>\n            <Route path=\"/\" element={<Dashboard />} />\n            <Route path=\"/vehicle/:id\" element={<VehicleDetail />} />\n            <Route path=\"/Vehicle-add\" element={<AddVehicle />} />\n            <Route path=\"/Vehicle-detail\" element={<VehicleDetail />} />\n            <Route path=\"/vehicle/:id/edit\" element={<EditVehicle />} />\n            <Route path=\"/self-diagnosis\" element={<SelfDiagnosis />} />\n          </Routes>\n        </div>\n      </div>\n    </>\n  );\n};\n\nfunction App() {\n  useEffect(() => {\n    // Clear tokens and login flags on first load\n    localStorage.removeItem('token');\n    localStorage.removeItem('isLoggedIn');\n  }, []);\n\n  return (\n    <Router>\n      <LayoutWrapper />\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}