{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import\"./VehicleDetail.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EditVehicle(){const{id}=useParams();const[vehicle,setVehicle]=useState(null);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem(\"token\");fetch(`http://localhost:5000/api/vehicles/${id}`,{headers:{Authorization:`Bearer ${token}`}}).then(res=>{if(!res.ok)throw new Error(\"Vehicle not found\");return res.json();}).then(data=>setVehicle(data)).catch(err=>setError(err.message));},[id]);const handleChange=e=>{setVehicle({...vehicle,[e.target.name]:e.target.value});};const handleSubmit=e=>{e.preventDefault();const token=localStorage.getItem(\"token\");fetch(`http://localhost:5000/api/vehicles/${id}`,{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${token}`},body:JSON.stringify(vehicle)}).then(res=>{if(!res.ok)throw new Error(\"Failed to update vehicle\");return res.json();}).then(()=>navigate(`/vehicle/${id}`)).catch(err=>setError(err.message));};if(error)return/*#__PURE__*/_jsx(\"div\",{children:error});if(!vehicle)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsx(\"div\",{className:\"edit-vehicle-container bg-edit-vehicle\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"vehicle-detail-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Edit Vehicle\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:vehicle.name||\"\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"i\",{children:\"Current Mileage\"})}),/*#__PURE__*/_jsx(\"input\",{name:\"current_mileage\",value:vehicle.current_mileage||\"\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Service KM\"}),/*#__PURE__*/_jsx(\"input\",{name:\"last_service_km\",value:vehicle.last_service_km||\"\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Service Interval KM\"}),/*#__PURE__*/_jsx(\"input\",{name:\"service_interval_km\",value:vehicle.service_interval_km||\"\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pajak Due\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"pajak_due\",value:vehicle.pajak_due?vehicle.pajak_due.slice(0,10):\"\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"back-button\",style:{marginTop:0},children:\"Save\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",style:{marginTop:20},type:\"button\",onClick:()=>navigate(-1),children:\"Cancel\"})]})});}export default EditVehicle;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","EditVehicle","id","vehicle","setVehicle","error","setError","navigate","token","localStorage","getItem","fetch","headers","Authorization","then","res","ok","Error","json","data","catch","err","message","handleChange","e","target","name","value","handleSubmit","preventDefault","method","body","JSON","stringify","children","className","onSubmit","onChange","required","current_mileage","last_service_km","service_interval_km","type","pajak_due","slice","style","marginTop","onClick"],"sources":["/Users/jumratyahmad/Work/Project/web-vgarage-react/src/components/EditVehicle.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport \"./VehicleDetail.css\";\r\n\r\nfunction EditVehicle() {\r\n  const { id } = useParams();\r\n  const [vehicle, setVehicle] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    fetch(`http://localhost:5000/api/vehicles/${id}`, {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) throw new Error(\"Vehicle not found\");\r\n        return res.json();\r\n      })\r\n      .then((data) => setVehicle(data))\r\n      .catch((err) => setError(err.message));\r\n  }, [id]);\r\n\r\n  const handleChange = (e) => {\r\n    setVehicle({ ...vehicle, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const token = localStorage.getItem(\"token\");\r\n    fetch(`http://localhost:5000/api/vehicles/${id}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify(vehicle),\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) throw new Error(\"Failed to update vehicle\");\r\n        return res.json();\r\n      })\r\n      .then(() => navigate(`/vehicle/${id}`))\r\n      .catch((err) => setError(err.message));\r\n  };\r\n\r\n  if (error) return <div>{error}</div>;\r\n  if (!vehicle) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"edit-vehicle-container bg-edit-vehicle\">\r\n      <div className=\"vehicle-detail-container\">\r\n        <h1 className=\"title\">Edit Vehicle</h1>\r\n        <form onSubmit={handleSubmit} className=\"form-grid\">\r\n          <div className=\"field\">\r\n            <label>Name</label>\r\n            <input\r\n              name=\"name\"\r\n              value={vehicle.name || \"\"}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"field\">\r\n            <label>\r\n              <i>Current Mileage</i>\r\n            </label>\r\n            <input\r\n              name=\"current_mileage\"\r\n              value={vehicle.current_mileage || \"\"}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"field\">\r\n            <label>Last Service KM</label>\r\n            <input\r\n              name=\"last_service_km\"\r\n              value={vehicle.last_service_km || \"\"}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"field\">\r\n            <label>Service Interval KM</label>\r\n            <input\r\n              name=\"service_interval_km\"\r\n              value={vehicle.service_interval_km || \"\"}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"field\">\r\n            <label>Pajak Due</label>\r\n            <input\r\n              type=\"date\"\r\n              name=\"pajak_due\"\r\n              value={vehicle.pajak_due ? vehicle.pajak_due.slice(0, 10) : \"\"}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"back-button\"\r\n            style={{ marginTop: 0 }}\r\n          >\r\n            Save\r\n          </button>\r\n        </form>\r\n        <button\r\n          className=\"back-button\"\r\n          style={{ marginTop: 20 }}\r\n          type=\"button\"\r\n          onClick={() => navigate(-1)}\r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditVehicle;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}